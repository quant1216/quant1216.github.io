---
title: "What to look for in a code review"
source: https://google.github.io/eng-practices/review/reviewer/looking-for.html
date: 2020-05-18 16:00:00
categories: basic
---
<h1>단순 번역 및 요약</h1>
<h2>What to look for in a code review</h2>
<h3>Design</h3>
* 변경 사항의 상호 작용이 이해가 되는가?
* 변경 사항이 현재의 코드, 라이브러리에 속하는가?
* 시스템의 다른 사항과 잘 통합되는가?
* 이 함수를 지금 넣는 것이 적합한 시기인가?

<h3>Functionality</h3>
* 변경 사항이 의도한대로 기능이 맞는가?
* 이 코드의 사용자에게 유용하도록 의도되었는가?
* Edge case에 대해 고민해보고, concurrency 문제에 대해 생각하고, 사용자 입장에서 생각하면서 코드에 문제가 없는가?
* 가장 중요한 사안은 만약 변경된 코드가 유저에게 직접적인 영향을 미치는 경우이다. 이런 경우에는 code를 읽는 것만으로는 영향력을 판단할 수 없다. 해당 기능에 대한 demo를 요구할 수 있으며 직접 해당 기능의 편의성에 대해 점검해야 한다.
* 만약 변경 사항에 parallel programming이 있다면 이론적으로 deadlocks 또는 race conditions의 발생 여부를 점검해야 한다. 이런 이슈들은 코드가 구동되고 나면 알아내기가 어렵기 때문이다. (이는 또한 concurrency model을 지양하기 위한 방법이기도 하다.)

<h3>Complexity</h3>
* 모든 기능에 비해 너무 복잡하지는 않은가? 예를 들어 코드, 함수, 클래스 각각이 될 수 있다. 이는 읽는 사람의 빠른 이해를 저해한다. 
* over-engineering이 되지 않았는가? 필요한 기능보다 너무 generic한 함수 이거나, 현재는 필요하지 않는 기능들이 있는 경우이다. 개발자들이 미래에 발생할지도 모르는 문제에 대해 해결하게 하는 것보다 현재 필요한 문제에 집중하도록 만들어야 한다. 미래의 문제는 그 문제가 발생할 때 해결해야 더 명확한 문제의 요구 사안들을 파악할 수 있기 때문이다.

<h3>Tests</h3>
* 변경 사항에 대하여 적절한 unit, integration, end-to-end test를 요구합니다. 긴급 사항이 아니라면 일반적으로 tests들은 관련된 CL에 함께 포함되어 있어야 합니다.
* Tests가 정확하고, 명확하며, 유용한지 확인해야 합니다. Tests를 위한 tests를 만들지는 않습니다. 그렇기에 사람이 tests를 점검해야 합니다.
* Code가 망가졌을 때 tests가 실패하는가?
* 문제가 있을 때, 적절한 false positive를 생산하는가?
* 간단하고 유용한 경고 알람을 만들어내는가?
* 다른 test methods와 적절하게 분리가 되었는가?
* Tests 또한 코드이고 유지보수 되어야 한다. 따라서 tests의 complexity에 대한 점검도 필요하다.

<h3>Naming</h3>
* 명확한 명칭을 사용하였는가? 좋은 명칭은 해당 item이 무엇이고 무엇을 하는지에 대해 충분히 표현할 수 있어야 한다. 

<h3>Comments</h3>
* 이해할 수 있는 언어로 명확한 comments를 적었는가?
* 모든 comment들이 필요한가? 보통 comment는 왜 해당 코드가 존재하는지에 설명을 하기에 유용하다. 그리고 해당 코드가 무엇을 하는지에 대해서는 설명하지 않아야 한다. 만약 code가 자신을 설명하기에 부족하다면 그것은 code가 더 간단하게 바뀌어야 한다는 것을 의미한다. 물론 예외도 존재한다. regular expression, 복잡한 알고리즘들은 무엇을 하는지 설명해주는 것이 더 좋을 때도 있다. 하지만 일반적으로는 코드 자체를 설명하는 것은 옳지 않다.
* 변경 사항 이전의 comments를 보는 것도 도움이 된다. TODO와 같은 것들이 현재 변경 사항에 의해서 없어지는 경우가 발생할 수도 있기 때문이다.
* Comments는 classes, modules, function의 documentation 과는 명확히 다르다는 것을 명심해라.

<h3>Style</h3>
* Style guides를 따르는가? Google에서 제공되는 style guides 문서도 존재한다. 만약 style guide를 따르지 않지만 개선을 하고 싶은 부분이 있다면 "Nit"를 이용하여 comment를 달도록 하자. guide에서 선택의 여지를 주는 개인의 style preference 때문에 CL을 막아서는 안 된다.
* 대규모 style 변경이 발생할 경우 이는 기존 목적의 CL과는 따로 진행되어야 한다. 이 두가지가 함께 발생할 경우 어떤 변화가 생겼는지 파악하기가 어렵고, merge와 rollback을 복잡하게 하며, 결국 다양한 문제들을 만들어낸다. 만약 개발자가 두 가지를 함께 하려고 할 경우 CL의 분리를 요구해야 한다.

<h3>Consistency</h3>
* 만약 존재하는 코드가 style guide를 따르지 않는다면 어떻게 할까? 구글에서는 style guide가 절대적인 권위를 가지고 있다. 만약 style guide에 따르는 변경 사항 요청이 있다면 CL은 해당 guide를 따라야한다.
* 만약 style guideline이 필수 조건보다는 추천에 가깝다면 새로운 코드가 style guide를 따를지, 주변의 코드를 따를지는 결정해야할 사안이다. inconsistency가 너무 혼란스럽지 않는 한에서 style guide를 따르도록 하자.
* 만약에 존재하는 rule이 없다면, 개발자는 주변에 존재하는 code의 스타일을 따라야 한다.
* 개발자가 존재하는 코드를 더 깔끔하게 만들기 위해 bug를 정리하고 TODO를 추가하는 것을 장려해라.

<h3>Documentation</h3>
* 만약 CL이 유저가 어떻게 build, test, interact, release 하는지를 변경시켰다면 이 부분이 관련된 documentation도 함께 변경되었는지 확인해야 합니다. Documentation과 관련되어 있는 코드 변경은 함께 연동되어서 변경되어야 합니다.

<h3>Every Line</h3>
* Review로 할당된 모든 코드를 다 보도록 해라. 가끔 data file, generated code, large data structure들은 무시할 수도 있지만 사람이 직접 만든 모든 것들은 면밀히 조사해야 한다. 분명히 특정 부분은 더욱 주의를 기울여야 하는 부분이 있겠지만 변경된 모든 코드가 무엇을 하는지 이해해야 한다. 
* 만약 코드의 가독성 때문에 코드가 읽기 어렵다면 이 부분을 개발자에게 말하고 이 부분이 해결되고 나서 리뷰를 진행하면 된다. 당신이 이해를 못 한다면 이는 미래의 다른 누군가도 이해를 못 할 수 있기에 꼭 개발자에게 요청해야 한다.
* 만약 코드를 다 이해했지만 당신이 해당 부분에 있어서 권한 있는 사람이 아니라고 생각한다면 권한이 있는 reviwer가 존재한다는 사실을 개발자에게 알려줘야 한다.

<h3>Context</h3>
* 종종 변경 사항을 넓은 context를 가지고 보는 것이 도움이 될 때가 있다. 비록 변경된 code는 적더라도 이와 관련된 또는 주위의 코드를 함께 봄으로써 변경된 code를 잘 이해할 수 있고 잠재된 문제들을 찾을 수 있다.
* 시스템 전체의 context에서 바라보는 것도 유익하다. 해당 변경 사항이 시스템의 코드 품질을 개선시킬지, 시스템을 복잡하게 만들지는 않았는지, 테스트가 너무 적은지를 보는 것이다. 
* 시스템의 코드 품질을 떨어뜨리는 변경 사항은 받아들이지 마라. 대부분의 시스템은 수많은 작은 변화들을 통해서 복잡해진다. 따라서 작은 복잡성부터 방지하는 것이 매우 중요하다.

<h3>Good Things</h3>
* 좋은 변경 사항들이 있다면 이를 공개해라. 이는 개발 당사자에게도 가치가 있지만 다른 개발자들에게도 무엇을 잘하고 무엇을 못하는지 알려줄 수 있는 매우 좋은 방법이다.

<h3>Summary</h3>
* 코드가 잘 디자인 되었는가?
* 코드의 사용자의 관점에서 기능이 잘 구현되었는가?
* 민감한 UI 변경이 있고 잘 구성되었는가?
* Parallel programminng이 안전하게 구성되었는가?
* 코드가 필요 이상으로 복잡하지는 않은가?
* 개발자가 현재에 필요하진 않지만 미래에 아마 필요할 것 같아서 개발한 부분이 있는가?
* 코드가 적절한 unit tests를 가지고 있는가?
* 테스트가 잘 디자인 되었는가?
* 개발자가 명확한 이름들을 사용했는가?
* Comments가 명확하고 유용하며, '무엇'이 아니라 '왜'에 대해서 잘 설명하고 있는가?
* 코드가 적절하게 문서화되었는가?
* 코드가 팀의 스타일 가이드라인을 따라가는가?

당신에게 할당된 모든 리뷰 코드를 보며, context를 파악해라. 그리고 코드의 품질을 향상시키며 잘한 일을 한 개발자에게는 그들이 한 일에 대해서 칭찬을 해주어라.

<h1>내 의견</h1>

* 개발자로써 Comments로 남겨야 할 것은 해당 코드의 존재 이유이다. 해당 코드가 무엇을 하는지를 쓰는 것이 아니다. 코드를 최대한 간단하게 만듦으로써 이를 comments에서 설명해야 하는 일이 없어야 한다.
* 현재 필요하지는 않지만 미래에 필요할 것 같아서 존재해야 하는 코드는 없다.
* Tests도 코드다. Tests 또한 일반 code와 동일한 수준의 관리를 해야 한다.
* 대부분의 시스템은 수많은 작은 변화들을 통해서 복잡해진다. 따라서 작은 복잡성부터 방지하는 것이 매우 중요하다.